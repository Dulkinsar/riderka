<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harvard Pathway Builder</title>
    <style>
        /* Previous styles remain intact */
        .recommendations-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .recommendation-card {
            background: #FFF;
            padding: 2rem;
            border-radius: 1.5rem;
            border: 3px solid #EEE6FA;
            position: relative;
            overflow: hidden;
        }

        .recommendation-card::before {
            content: '';
            position: absolute;
            top: -1rem;
            right: -1rem;
            width: 4rem;
            height: 4rem;
            background: var(--primary-yellow);
            border-radius: 50%;
            opacity: 0.2;
        }

        .progress-meter {
            height: 0.8rem;
            background: #EEE6FA;
            border-radius: 1rem;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-purple);
            border-radius: 1rem;
            transition: width 0.5s ease;
        }

        .timeline {
            display: flex;
            justify-content: space-between;
            margin: 2rem 0;
            padding: 1rem;
            background: #FCFAFF;
            border-radius: 1.5rem;
        }

        .timeline-item {
            text-align: center;
            padding: 1rem;
            position: relative;
        }

        .timeline-item::after {
            content: '‚ûî';
            position: absolute;
            right: -2rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-purple);
        }

        .timeline-item:last-child::after {
            display: none;
        }

        .resource-list {
            list-style: none;
            padding: 0;
        }

        .resource-item {
            margin: 0.8rem 0;
            padding: 1rem;
            background: #F8F5FF;
            border-radius: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .urgency-tag {
            padding: 0.3rem 1rem;
            border-radius: 1rem;
            font-size: 0.9rem;
            margin-left: auto;
        }

        .high-urgency {
            background: #FF6B6B20;
            color: #FF6B6B;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Previous form elements remain -->
        
        <div class="recommendations-section" id="recommendations" style="display: none;">
            <div class="recommendation-card">
                <h3>üìö Academic Roadmap</h3>
                <div class="progress-meter">
                    <div class="progress-fill" id="academicProgress" style="width: 60%"></div>
                </div>
                <div id="academicTips"></div>
            </div>

            <div class="recommendation-card">
                <h3>üåç Profile Building</h3>
                <div class="progress-meter">
                    <div class="progress-fill" id="profileProgress" style="width: 30%"></div>
                </div>
                <div id="profileTips"></div>
            </div>

            <div class="recommendation-card">
                <h3>üìù Application Strategy</h3>
                <div class="timeline" id="timeline"></div>
                <ul class="resource-list" id="resources"></ul>
            </div>
        </div>
    </div>

    <script>
        const HARVARD_STATS = {
            avgSAT: 1520,
            minIELTS: 7.5,
            avgGPA: 4.18,
            acceptanceRate: 3.2
        };

        function calculatePathway() {
            const grade = parseInt(document.getElementById('grade').value);
            const gpa = parseFloat(gpaSlider.value);
            const sat = parseInt(document.getElementById('sat').value);
            const ielts = parseFloat(document.getElementById('ielts').value);
            const city = document.querySelector('input[name="city"]:checked').value;
            const subject = document.getElementById('subject').value;

            const monthsRemaining = (12 - grade) * 12;
            const admissionScore = calculateAdmissionPotential(gpa, sat, ielts);
            
            displayAcademicTips(gpa, sat, ielts);
            displayProfileTips(grade, city, subject, monthsRemaining);
            displayTimeline(grade);
            displayResources(city, subject);
            
            document.getElementById('recommendations').style.display = 'grid';
        }

        function calculateAdmissionPotential(gpa, sat, ielts) {
            const gpaScore = (Math.min(gpa, 5.0)/5) * 40;
            const satScore = (sat/1600) * 35;
            const ieltsScore = (ielts/9) * 25;
            return Math.min(gpaScore + satScore + ieltsScore, 100);
        }

        function displayAcademicTips(gpa, sat, ielts) {
            const tips = [];
            
            if(gpa < 4.5) {
                tips.push(`üö® GPA Enhancement: Consider taking ${gpa < 4.0 ? 'foundation' : 'AP'} courses`);
            }
            if(sat < 1400) {
                tips.push(`üìà SAT Boost: Target ${1600 - sat} point improvement through Khan Academy`);
            }
            if(ielts < 7.5) {
                tips.push(`üåê English Mastery: Join British Council preparation courses in Almaty`);
            }

            document.getElementById('academicTips').innerHTML = tips.map(t => `
                <div class="resource-item">
                    <div>${t}</div>
                    <div class="urgency-tag high-urgency">HIGH PRIORITY</div>
                </div>
            `).join('');
            
            document.getElementById('academicProgress').style.width = 
                `${Math.min((gpa/5)*100, 100)}%`;
        }

        function displayProfileTips(grade, city, subject, months) {
            const tips = [];
            
            tips.push(`${grade < 11 ? 'Start' : 'Finalize'} ${subject} portfolio`);
            
            if(['Almaty', 'Nur-Sultan'].includes(city)) {
                tips.push(`Network with Harvard Club of Kazakhstan`);
            } else {
                tips.push(`Participate in online international competitions`);
            }
            
            if(subject === 'STEM') {
                tips.push(`Compete in Republican Math Olympiad`);
            }

            document.getElementById('profileTips').innerHTML = tips.map(t => `
                <div class="resource-item">
                    <div>${t}</div>
                </div>
            `).join('');
        }

        function displayTimeline(grade) {
            const milestones = {
                9: ['Grade 10 Prep', 'SAT Foundation', 'Leadership Role', 'Application Draft'],
                10: ['AP Courses', 'SAT Attempt', 'Research Project', 'College List'],
                11: ['Final SAT', 'Subject Tests', 'Essays Draft', 'Recommendations'],
                12: ['Early Application', 'Interviews Prep', 'Financial Aid', 'Submission']
            };

            document.getElementById('timeline').innerHTML = 
                milestones[grade].map(m => `
                    <div class="timeline-item">
                        <div>${m}</div>
                    </div>
                `).join('');
        }

        function displayResources(city, subject) {
            const resources = {
                'Almaty': [
                    'NIS Physics Circle',
                    'Daryn National Competition',
                    'Almaty Debate League'
                ],
                'STEM': [
                    'International Youth Math Challenge',
                    'MIT OpenCourseWare',
                    'Kazakhstan Robotics Championship'
                ]
            };

            let resourceItems = [];
            if(resources[city]) resourceItems.push(...resources[city]);
            if(resources[subject]) resourceItems.push(...resources[subject]);

            document.getElementById('resources').innerHTML = resourceItems.map(r => `
                <li class="resource-item">
                    üìå ${r}
                </li>
            `).join('');
        }
    </script>
</body>
</html>
